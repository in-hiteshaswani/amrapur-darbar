(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{3836:(t,e)=>{"use strict";e.byteLength=function(t){var e=h(t),i=e[0],r=e[1];return(i+r)*3/4-r},e.toByteArray=function(t){var e,i,s=h(t),o=s[0],a=s[1],l=new n((o+a)*3/4-a),u=0,c=a>0?o-4:o;for(i=0;i<c;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===a&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,l[u++]=255&e),1===a&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,s=[],o=0,a=r-n;o<a;o+=16383)s.push(function(t,e,r){for(var n,s=[],o=e;o<r;o+=3)s.push(i[(n=(t[o]<<16&0xff0000)+(t[o+1]<<8&65280)+(255&t[o+2]))>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return s.join("")}(t,o,o+16383>a?a:o+16383));return 1===n?s.push(i[(e=t[r-1])>>2]+i[e<<4&63]+"=="):2===n&&s.push(i[(e=(t[r-2]<<8)+t[r-1])>>10]+i[e>>4&63]+i[e<<2&63]+"="),s.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)i[o]=s[o],r[s.charCodeAt(o)]=o;function h(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");-1===i&&(i=e);var r=i===e?0:4-i%4;return[i,r]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},5927:(t,e,i)=>{"use strict";var r=i(3836),n=i(4981),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(t){if(t>0x7fffffff)throw RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,a.prototype),e}function a(t,e,i){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return u(t)}return h(t,e,i)}function h(t,e,i){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!a.isEncoding(e))throw TypeError("Unknown encoding: "+e);var i=0|d(t,e),r=o(i),n=r.write(t,e);return n!==i&&(r=r.slice(0,n)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(L(t,Uint8Array)){var e=new Uint8Array(t);return g(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(L(t,ArrayBuffer)||t&&L(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(L(t,SharedArrayBuffer)||t&&L(t.buffer,SharedArrayBuffer)))return g(t,e,i);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return a.from(r,e,i);var n=function(t){if(a.isBuffer(t)){var e,i=0|p(t.length),r=o(i);return 0===r.length||t.copy(r,0,0,i),r}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?o(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return l(t),o(t<0?0:0|p(t))}function c(t){for(var e=t.length<0?0:0|p(t.length),i=o(e),r=0;r<e;r+=1)i[r]=255&t[r];return i}function g(t,e,i){var r;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),a.prototype),r}function p(t){if(t>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function d(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||L(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return T(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return R(t).length;default:if(n)return r?-1:T(t).length;e=(""+e).toLowerCase(),n=!0}}function f(t,e,i){var n,s,o=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,i){var r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);for(var n="",s=e;s<i;++s)n+=I[t[s]];return n}(this,e,i);case"utf8":case"utf-8":return x(this,e,i);case"ascii":return function(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}(this,e,i);case"latin1":case"binary":return function(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}(this,e,i);case"base64":return n=e,s=i,0===n&&s===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(n,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,i){for(var r=t.slice(e,i),n="",s=0;s<r.length-1;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}(this,e,i);default:if(o)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function y(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function w(t,e,i,r,n){var s;if(0===t.length)return -1;if("string"==typeof i?(r=i,i=0):i>0x7fffffff?i=0x7fffffff:i<-0x80000000&&(i=-0x80000000),(s=i=+i)!=s&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return -1;i=t.length-1}else if(i<0){if(!n)return -1;i=0}if("string"==typeof e&&(e=a.from(e,r)),a.isBuffer(e))return 0===e.length?-1:m(t,e,i,r,n);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):m(t,[e],i,r,n);throw TypeError("val must be string, number or Buffer")}function m(t,e,i,r,n){var s,o=1,a=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;o=2,a/=2,h/=2,i/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){var u=-1;for(s=i;s<a;s++)if(l(t,s)===l(e,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===h)return u*o}else -1!==u&&(s-=s-u),u=-1}else for(i+h>a&&(i=a-h),s=i;s>=0;s--){for(var c=!0,g=0;g<h;g++)if(l(t,s+g)!==l(e,g)){c=!1;break}if(c)return s}return -1}function x(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var s,o,a,h,l=t[n],u=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c<=i)switch(c){case 1:l<128&&(u=l);break;case 2:(192&(s=t[n+1]))==128&&(h=(31&l)<<6|63&s)>127&&(u=h);break;case 3:s=t[n+1],o=t[n+2],(192&s)==128&&(192&o)==128&&(h=(15&l)<<12|(63&s)<<6|63&o)>2047&&(h<55296||h>57343)&&(u=h);break;case 4:s=t[n+1],o=t[n+2],a=t[n+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(h=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(u=h)}null===u?(u=65533,c=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),n+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var i="",r=0;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return i}(r)}function v(t,e,i){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>i)throw RangeError("Trying to access beyond buffer length")}function b(t,e,i,r,n,s){if(!a.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw RangeError('"value" argument is out of bounds');if(i+r>t.length)throw RangeError("Index out of range")}function P(t,e,i,r,n,s){if(i+r>t.length||i<0)throw RangeError("Index out of range")}function S(t,e,i,r,s){return e=+e,i>>>=0,s||P(t,e,i,4,34028234663852886e22,-34028234663852886e22),n.write(t,e,i,r,23,4),i+4}function E(t,e,i,r,s){return e=+e,i>>>=0,s||P(t,e,i,8,17976931348623157e292,-17976931348623157e292),n.write(t,e,i,r,52,8),i+8}e.hp=a,e.IS=50,a.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(t,e,i){return h(t,e,i)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(t,e,i){return(l(t),t<=0)?o(t):void 0!==e?"string"==typeof i?o(t).fill(e,i):o(t).fill(e):o(t)},a.allocUnsafe=function(t){return u(t)},a.allocUnsafeSlow=function(t){return u(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==a.prototype},a.compare=function(t,e){if(L(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),L(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var i=t.length,r=e.length,n=0,s=Math.min(i,r);n<s;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);if(void 0===e)for(i=0,e=0;i<t.length;++i)e+=t[i].length;var i,r=a.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var s=t[i];if(L(s,Uint8Array))n+s.length>r.length?a.from(s).copy(r,n):Uint8Array.prototype.set.call(r,s,n);else if(a.isBuffer(s))s.copy(r,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=s.length}return r},a.byteLength=d,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},a.prototype.toString=function(){var t=this.length;return 0===t?"":0==arguments.length?x(this,0,t):f.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",i=e.IS;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(t,e,i,r,n){if(L(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return -1;if(e>=i)return 1;if(e>>>=0,i>>>=0,r>>>=0,n>>>=0,this===t)return 0;for(var s=n-r,o=i-e,h=Math.min(s,o),l=this.slice(r,n),u=t.slice(e,i),c=0;c<h;++c)if(l[c]!==u[c]){s=l[c],o=u[c];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(t,e,i){return -1!==this.indexOf(t,e,i)},a.prototype.indexOf=function(t,e,i){return w(this,t,e,i,!0)},a.prototype.lastIndexOf=function(t,e,i){return w(this,t,e,i,!1)},a.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,s,o,a,h,l,u,c,g=this.length-e;if((void 0===i||i>g)&&(i=g),t.length>0&&(i<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var p=!1;;)switch(r){case"hex":return function(t,e,i,r){i=Number(i)||0;var n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;var s=e.length;r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(a!=a)break;t[i+o]=a}return o}(this,t,e,i);case"utf8":case"utf-8":return n=e,s=i,C(T(t,this.length-n),this,n,s);case"ascii":case"latin1":case"binary":return o=e,a=i,C(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(t),this,o,a);case"base64":return h=e,l=i,C(R(t),this,h,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=e,c=i,C(function(t,e){for(var i,r,n=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(i=t.charCodeAt(s))>>8,n.push(i%256),n.push(r);return n}(t,this.length-u),this,u,c);default:if(p)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||v(t,e,this.length);for(var r=this[t],n=1,s=0;++s<e&&(n*=256);)r+=this[t+s]*n;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||v(t,e,this.length);for(var r=this[t+--e],n=1;e>0&&(n*=256);)r+=this[t+--e]*n;return r},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t>>>=0,e||v(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||v(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||v(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||v(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+0x1000000*this[t+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||v(t,4,this.length),0x1000000*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||v(t,e,this.length);for(var r=this[t],n=1,s=0;++s<e&&(n*=256);)r+=this[t+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},a.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||v(t,e,this.length);for(var r=e,n=1,s=this[t+--r];r>0&&(n*=256);)s+=this[t+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*e)),s},a.prototype.readInt8=function(t,e){return(t>>>=0,e||v(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||v(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?0xffff0000|i:i},a.prototype.readInt16BE=function(t,e){t>>>=0,e||v(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?0xffff0000|i:i},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||v(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||v(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return t>>>=0,e||v(t,4,this.length),n.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||v(t,4,this.length),n.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||v(t,8,this.length),n.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||v(t,8,this.length),n.read(this,t,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,i,r){if(t=+t,e>>>=0,i>>>=0,!r){var n=Math.pow(2,8*i)-1;b(this,t,e,i,n,0)}var s=1,o=0;for(this[e]=255&t;++o<i&&(s*=256);)this[e+o]=t/s&255;return e+i},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,i,r){if(t=+t,e>>>=0,i>>>=0,!r){var n=Math.pow(2,8*i)-1;b(this,t,e,i,n,0)}var s=i-1,o=1;for(this[e+s]=255&t;--s>=0&&(o*=256);)this[e+s]=t/o&255;return e+i},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||b(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||b(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||b(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||b(this,t,e,4,0xffffffff,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||b(this,t,e,4,0xffffffff,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){var n=Math.pow(2,8*i-1);b(this,t,e,i,n-1,-n)}var s=0,o=1,a=0;for(this[e]=255&t;++s<i&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+i},a.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){var n=Math.pow(2,8*i-1);b(this,t,e,i,n-1,-n)}var s=i-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+i},a.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||b(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||b(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||b(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||b(this,t,e,4,0x7fffffff,-0x80000000),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||b(this,t,e,4,0x7fffffff,-0x80000000),t<0&&(t=0xffffffff+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeFloatLE=function(t,e,i){return S(this,t,e,!0,i)},a.prototype.writeFloatBE=function(t,e,i){return S(this,t,e,!1,i)},a.prototype.writeDoubleLE=function(t,e,i){return E(this,t,e,!0,i)},a.prototype.writeDoubleBE=function(t,e,i){return E(this,t,e,!1,i)},a.prototype.copy=function(t,e,i,r){if(!a.isBuffer(t))throw TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);var n=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),n},a.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===t.length){var n,s=t.charCodeAt(0);("utf8"===r&&s<128||"latin1"===r)&&(t=s)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw RangeError("Out of range index");if(i<=e)return this;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{var o=a.isBuffer(t)?t:a.from(t,r),h=o.length;if(0===h)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=o[n%h]}return this};var A=/[^+/0-9A-Za-z-_]/g;function T(t,e){e=e||1/0;for(var i,r=t.length,n=null,s=[],o=0;o<r;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319||o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return s}function R(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(A,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function C(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length)&&!(n>=t.length);++n)e[n+i]=t[n];return n}function L(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}var I=function(){for(var t="0123456789abcdef",e=Array(256),i=0;i<16;++i)for(var r=16*i,n=0;n<16;++n)e[r+n]=t[i]+t[n];return e}()},4981:(t,e)=>{e.read=function(t,e,i,r,n){var s,o,a=8*n-r-1,h=(1<<a)-1,l=h>>1,u=-7,c=i?n-1:0,g=i?-1:1,p=t[e+c];for(c+=g,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=256*s+t[e+c],c+=g,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+c],c+=g,u-=8);if(0===s)s=1-l;else{if(s===h)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),s-=l}return(p?-1:1)*o*Math.pow(2,s-r)},e.write=function(t,e,i,r,n,s){var o,a,h,l=8*s-n-1,u=(1<<l)-1,c=u>>1,g=23===n?5960464477539062e-23:0,p=r?0:s-1,d=r?1:-1,f=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+c>=1?e+=g/h:e+=g*Math.pow(2,1-c),e*h>=2&&(o++,h/=2),o+c>=u?(a=0,o=u):o+c>=1?(a=(e*h-1)*Math.pow(2,n),o+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;t[i+p]=255&a,p+=d,a/=256,n-=8);for(o=o<<n|a,l+=n;l>0;t[i+p]=255&o,p+=d,o/=256,l-=8);t[i+p-d]|=128*f}},2770:function(t,e){!function(t){"use strict";class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends e{constructor(t,e,i){super(t,i),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){let e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),r=this.render.getRect().pageWidth,n=this.render.getRect().height;for(let t of(e.save(),e.translate(i.x,i.y),e.beginPath(),this.state.area))null!==t&&(t=this.render.convertToGlobal(t),e.lineTo(t.x-i.x,t.y-i.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,r,n):this.drawLoader(e,{x:0,y:0},r,n),e.restore()}simpleDraw(t){let e=this.render.getRect(),i=this.render.getContext(),r=e.pageWidth,n=e.height,s=1===t?e.left+e.pageWidth:e.left,o=e.top;this.isLoad?i.drawImage(this.image,s,o,r,n):this.drawLoader(i,{x:s,y:o},r,n)}drawLoader(t,e,i,r){t.beginPath(),t.strokeStyle="rgb(200, 200, 200)",t.fillStyle="rgb(255, 255, 255)",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,r-1),t.stroke(),t.fill();let n={x:e.x+i/2,y:e.y+r/2};t.beginPath(),t.lineWidth=10,t.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class r{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let t=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity("hard"))}getSpread(){return"landscape"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){let e=this.getSpread();for(let i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw Error("Invalid page number")}nextBy(t){let e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){let e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){let e=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{let i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(t){let e=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{let i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;let e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw Error("Invalid page");this.currentSpreadIndex=t}showSpread(){let t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):"landscape"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class n extends r{constructor(t,e,i){super(t,e),this.imagesHref=i}load(){for(let t of this.imagesHref){let e=new i(this.render,t,"soft");e.load(),this.pages.push(e)}this.createSpread()}}class s{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return s.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){let i=t[0].y-t[1].y,r=e[0].y-e[1].y,n=t[1].x-t[0].x,s=e[1].x-e[0].x;return Math.acos((i*r+n*s)/(Math.sqrt(i*i+n*n)*Math.sqrt(r*r+s*s)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}static LimitPointToCircle(t,e,i){if(s.GetDistanceBetweenTwoPoint(t,i)<=e)return i;let r=t.x,n=t.y,o=i.x,a=i.y,h=Math.sqrt(Math.pow(e,2)*Math.pow(r-o,2)/(Math.pow(r-o,2)+Math.pow(n-a,2)))+r;i.x<0&&(h*=-1);let l=(h-r)*(n-a)/(r-o)+n;return r-o+n===0&&(l=e),{x:h,y:l}}static GetIntersectBetweenTwoSegment(t,e,i){return s.PointInRect(t,s.GetIntersectBeetwenTwoLine(e,i))}static GetIntersectBeetwenTwoLine(t,e){let i=t[0].y-t[1].y,r=e[0].y-e[1].y,n=t[1].x-t[0].x,s=e[1].x-e[0].x,o=t[0].x*t[1].y-t[1].x*t[0].y,a=e[0].x*e[1].y-e[1].x*e[0].y,h=-(o*s-a*n)/(i*s-r*n),l=-(i*a-r*o)/(i*s-r*n);if(isFinite(h)&&isFinite(l))return{x:h,y:l};if(.1>Math.abs(i*a-r*o-(n*a-s*o)))throw Error("Segment included");return null}static GetCordsFromTwoPoint(t,e){let i=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),n=Math.max(i,r),s=[t];function o(t,e,i,r,n){return e>t?t+i/r*n:e<t?t-i/r*n:t}for(let a=1;a<=n;a+=1)s.push({x:o(t.x,e.x,i,n,a),y:o(t.y,e.y,r,n,a)});return s}}class o extends e{constructor(t,e,i){super(t,i),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add("stf__item"),this.element.classList.add("--"+i)}newTemporaryCopy(){return"hard"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new o(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){let e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),r=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove("--simple");let s=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${r}px;
            height: ${n}px;
        `;"hard"===e?this.drawHard(s):this.drawSoft(i,s)}drawHard(t=""){let e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,r=t+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=r}drawSoft(t,e=""){let i="polygon( ";for(let t of this.state.area)if(null!==t){let e=1===this.render.getDirection()?{x:-t.x+this.state.position.x,y:t.y-this.state.position.y}:{x:t.x-this.state.position.x,y:t.y-this.state.position.y};i+=(e=s.GetRotatedPoint(e,{x:0,y:0},this.state.angle)).x+"px "+e.y+"px, "}i=i.slice(0,-2)+")";let r=e+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=r}simpleDraw(t){let e=this.render.getRect(),i=e.pageWidth,r=e.height,n=1===t?e.left+e.pageWidth:e.left,s=e.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${r}px; 
            left: ${n}px; 
            top: ${s}px; 
            width: ${i}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove("--left","--right"),this.element.classList.add(1===t?"--right":"--left")}setDrawingDensity(t){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+t),super.setDrawingDensity(t)}}class a extends r{constructor(t,e,i,r){super(t,e),this.element=i,this.pagesElement=r}load(){for(let t of this.pagesElement){let e=new o(this.render,t,"hard"===t.dataset.density?"hard":"soft");e.load(),this.pages.push(e)}this.createSpread()}}class h{constructor(t,e,i,r){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(i,10),this.pageHeight=parseInt(r,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}getFlippingClipArea(){let t=[],e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||"bottom"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){let t=[];return t.push(this.topIntersectPoint),"top"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?s.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):"top"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){let t=s.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),1>Math.abs((e="top"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0})).x-this.pageWidth)&&1>Math.abs(e.y))throw Error("Point is too small");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){let e=this.pageWidth-t.x+1,i="bottom"===this.corner?this.pageHeight-t.y:t.y,r=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(r=-r);let n=Math.PI-r;if(!isFinite(r)||n>=0&&n<.003)throw Error("The G point is too small");return"bottom"===this.corner&&(r=-r),r}getPageRect(t){return"top"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){let e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};"top"===this.corner?(this.topIntersectPoint=s.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=s.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=s.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=s.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}])),this.bottomIntersectPoint=s.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])}checkPositionAtCenterLine(t,e,i){let r=t,n=s.LimitPointToCircle(e,this.pageWidth,r);r!==n&&(r=n,this.updateAngleAndGeometry(r));let o=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2)),a=this.rect.bottomRight,h=this.rect.topLeft;if("bottom"===this.corner&&(a=this.rect.topRight,h=this.rect.bottomLeft),a.x<=0){let t=s.LimitPointToCircle(i,o,h);t!==r&&(r=t,this.updateAngleAndGeometry(r))}return r}getSegmentToShadowLine(){let t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class l{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=t,this.app=e}fold(t){this.setState("user_fold"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t)||(null!==this.calc&&this.render.finishAnimation(),!this.start(t)))return;let e=this.getBoundsRect();this.setState("flipping");let i=e.height/10,r="bottom"===this.calc.getCorner()?e.height-i:i,n="bottom"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:r}),this.animateFlippingTo({x:e.pageWidth-i,y:r},{x:-e.pageWidth,y:n},!0)}start(t){this.reset();let e=this.render.convertToBook(t),i=this.getBoundsRect(),r=this.getDirectionByPoint(e),n=e.y>=i.height/2?"bottom":"top";if(!this.checkDirection(r))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(r),this.bottomPage=this.app.getPageCollection().getBottomPage(r),"landscape"===this.render.getOrientation()){if(1===r){let t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),t.setDrawingDensity("hard"))}else{let t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),t.setDrawingDensity("hard"))}}return this.render.setDirection(r),this.calc=new h(r,n,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){let t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){let i=this.app.getPageCollection().getCurrentSpreadIndex(),r=this.app.getPageCollection().getSpreadIndexByPage(t);try{r>i&&(this.app.getPageCollection().setCurrentSpreadIndex(r-1),this.flipNext(e)),r<i&&(this.app.getPageCollection().setCurrentSpreadIndex(r+1),this.flipPrev(e))}catch(t){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:"top"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:"top"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;let t=this.calc.getPosition(),e=this.getBoundsRect(),i="bottom"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}showCorner(t){if(!this.checkState("read","fold_corner"))return;let e=this.getBoundsRect(),i=e.pageWidth;if(this.isPointOnCorners(t)){if(null===this.calc){if(!this.start(t))return;this.setState("fold_corner"),this.calc.calc({x:i-1,y:1});let r="bottom"===this.calc.getCorner()?e.height-1:1,n="bottom"===this.calc.getCorner()?e.height-50:50;this.animateFlippingTo({x:i-1,y:r},{x:i-50,y:n},!1,!1)}else this.do(this.render.convertToPage(t))}else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,i,r=!0){let n=s.GetCordsFromTwoPoint(t,e),o=[];for(let t of n)o.push(()=>this.do(t));let a=this.getAnimationDuration(n.length);this.render.startAnimation(o,a,()=>{this.calc&&(i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),r&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){let e=this.getBoundsRect();if("portrait"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){let e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(let e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){let e=this.getBoundsRect(),i=Math.sqrt(Math.pow(e.pageWidth,2)+Math.pow(e.height,2))/5,r=this.render.convertToBook(t);return r.x>0&&r.y>0&&r.x<e.width&&r.y<e.height&&(r.x<i||r.x>e.width-i)&&(r.y<i||r.y>e.height-i)}}class u{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;let i=RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==i.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){let e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();let t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;let t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t="landscape",e=this.getBlockWidth(),i=e/2,r=this.getBlockHeight()/2,n=this.setting.width/this.setting.height,s=this.setting.width,o=this.setting.height,a=i-s;return"stretch"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t="portrait"),(s="portrait"===t?this.getBlockWidth():this.getBlockWidth()/2)>this.setting.maxWidth&&(s=this.setting.maxWidth),(o=s/n)>this.getBlockHeight()&&(s=(o=this.getBlockHeight())*n),a="portrait"===t?i-s/2-s:i-s):e<2*s&&this.app.getSettings().usePortrait&&(t="portrait",a=i-s/2-s),this.boundsRect={left:a,top:r-o/2,width:2*s,height:o,pageWidth:s},t}setShadowData(t,e,i,r){if(!this.app.getSettings().drawShadow)return;let n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*n/100/100,direction:r,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&"portrait"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){let e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);let i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;let i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class c extends u{constructor(t,e,i){super(t,e),this.canvas=i,this.ctx=i.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());let t=this.getRect();"portrait"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){let t=this.getRect();this.ctx.save(),this.ctx.beginPath();let e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);let i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);let r=this.ctx.createLinearGradient(0,0,e,0);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),r.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),r.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),r.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),r.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=r,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){let t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);let e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);let i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),i.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,"rgba(0, 0, 0, 0)"),i.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){let t=this.getRect();this.ctx.save(),this.ctx.beginPath();let e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);let r=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,r,0);0===this.shadow.direction?(this.ctx.translate(-r,-100),n.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),n.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),n.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),n.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,r,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class g{constructor(t,e,i){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){let e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){let e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:i,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(i)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{let e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{let e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){let e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||"read"!==this.app.getState())&&t.cancelable&&this.app.userMove(i,!0),"read"!==this.app.getState()&&t.preventDefault()):this.app.userMove(i,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){let e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY),r=!1;if(null!==this.touchPoint){let t=i.x-this.touchPoint.point.x,e=Math.abs(i.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),r=!0),this.touchPoint=null}this.app.userStop(i,r)}},this.parentElement=t,t.classList.add("stf__parent"),t.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=t.querySelector(".stf__wrapper"),this.app=e;let r=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*r+"px",t.style.minHeight=i.minHeight+"px","fixed"===i.size&&(t.style.minWidth=i.width*r+"px",t.style.minHeight=i.height+"px"),i.autoSize&&(t.style.width="100%",t.style.maxWidth=2*i.maxWidth+"px"),t.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove("--portrait","--landscape"),"portrait"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(t,e){let i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||!["a","button"].includes(t.tagName.toLowerCase())}}class p extends g{constructor(t,e,i,r){for(let n of(super(t,e,i),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=t.querySelector(".stf__block"),this.items=r,r))this.distElement.appendChild(n);this.setHandlers()}clear(){for(let t of this.items)this.parentElement.appendChild(t)}updateItems(t){for(let e of(this.removeHandlers(),this.distElement.innerHTML="",t))this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class d extends g{constructor(t,e,i){super(t,e,i),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=t.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){let t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue("width"),10),i=parseInt(t.getPropertyValue("height"),10);this.canvas.width=e,this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class f extends u{constructor(t,e,i){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=i,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>'),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){let t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress,i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);let r=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${i}px;
            height: ${t.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${t.left+t.width/2}px;
            transform-origin: 0 0;
        `;r+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=r}drawHardOuterShadow(){let t=this.getRect(),e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let i=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${e}px;
            height: ${t.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${t.left+t.width/2}px;
            transform-origin: 0 0;
        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=i}drawInnerShadow(){let t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,r=0===this.getDirection()?"to left":"to right",n=this.convertToGlobal(this.shadow.pos),o=this.shadow.angle+3*Math.PI/2,a=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft],h="polygon( ";for(let t of a){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};h+=(e=s.GetRotatedPoint(e,{x:i,y:100},o)).x+"px "+e.y+"px, "}h=h.slice(0,-2)+")";let l=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${e}px;
            height: ${2*t.height}px;
            background: linear-gradient(${r},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${i}px 100px;
            transform: translate3d(${n.x-i}px, ${n.y-100}px, 0) rotate(${o}rad);
            clip-path: ${h};
            -webkit-clip-path: ${h};
        `;this.innerShadow.style.cssText=l}drawOuterShadow(){let t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,r=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?"to right":"to left",o=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}],a="polygon( ";for(let t of o)if(null!==t){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};a+=(e=s.GetRotatedPoint(e,{x:r,y:100},i)).x+"px "+e.y+"px, "}a=a.slice(0,-2)+")";let h=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*t.height}px;
            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${r}px 100px;
            transform: translate3d(${e.x-r}px, ${e.y-100}px, 0) rotate(${i}rad);
            clip-path: ${a};
            -webkit-clip-path: ${a};
        `;this.outerShadow.style.cssText=h}drawLeftPage(){"portrait"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;let t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;"portrait"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&("soft"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(let t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText="display: none"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class y{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){let e=this._default;if(Object.assign(e,t),"stretch"!==e.size&&"fixed"!==e.size)throw Error('Invalid size type. Available only "fixed" and "stretch" value');if(e.width<=0||e.height<=0)throw Error("Invalid width or height");if(e.flippingTime<=0)throw Error("Invalid flipping time");return"stretch"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}(function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}})(".stf__parent {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n\n  -ms-touch-action: pan-y;\n  touch-action: pan-y;\n}\n\n.sft__wrapper {\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.stf__parent canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  perspective: 2000px;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n  transform-style: preserve-3d;\n}\n\n.stf__outerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__innerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardInnerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}"),t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,i=null){if(this.events.has(t))for(let r of this.events.get(t))r({data:i,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new y).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new d(this.block,this,this.setting);let e=this.ui.getCanvas();this.render=new c(this,this.setting,e),this.flipController=new l(this.render,this),this.pages=new n(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new p(this.block,this,this.setting,t),this.render=new f(this,this.setting,this.ui.getDistElement()),this.flipController=new l(this.render,this),this.pages=new a(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){let e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new n(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){let e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new a(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t="top"){this.flipController.flipNext(t)}flipPrev(t="top"){this.flipController.flipPrev(t)}flip(t,e="top"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger("changeState",this,t)}updatePageIndex(t){this.trigger("flip",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger("changeOrientation",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&s.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,"__esModule",{value:!0})}(e)},5378:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var r=i(2115),n=i(2770);let s=r.forwardRef((t,e)=>{let i=(0,r.useRef)(null),s=(0,r.useRef)([]),o=(0,r.useRef)(),[a,h]=(0,r.useState)([]);(0,r.useImperativeHandle)(e,()=>({pageFlip:()=>o.current}));let l=(0,r.useCallback)(()=>{o.current&&o.current.clear()},[]),u=(0,r.useCallback)(()=>{let t=o.current;t&&(t.off("flip"),t.off("changeOrientation"),t.off("changeState"),t.off("init"),t.off("update"))},[]);return(0,r.useEffect)(()=>{if(s.current=[],t.children){let e=r.Children.map(t.children,t=>r.cloneElement(t,{ref:t=>{t&&s.current.push(t)}}));t.renderOnlyPageLengthChange&&a.length===e.length||(e.length<a.length&&l(),h(e))}},[t.children]),(0,r.useEffect)(()=>{a.length>0&&s.current.length>0&&(u(),i.current&&!o.current&&(o.current=new n.PageFlip(i.current,t)),o.current.getFlipController()?o.current.updateFromHtml(s.current):o.current.loadFromHTML(s.current),(()=>{let e=o.current;e&&(t.onFlip&&e.on("flip",e=>t.onFlip(e)),t.onChangeOrientation&&e.on("changeOrientation",e=>t.onChangeOrientation(e)),t.onChangeState&&e.on("changeState",e=>t.onChangeState(e)),t.onInit&&e.on("init",e=>t.onInit(e)),t.onUpdate&&e.on("update",e=>t.onUpdate(e)))})())},[a]),r.createElement("div",{ref:i,className:t.className,style:t.style},a)}),o=r.memo(s)},1809:t=>{"use strict";t.exports=function(){}},3463:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});let r=function(){for(var t,e,i=0,r="",n=arguments.length;i<n;i++)(t=arguments[i])&&(e=function t(e){var i,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e){if(Array.isArray(e)){var s=e.length;for(i=0;i<s;i++)e[i]&&(r=t(e[i]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r)}return n}(t))&&(r&&(r+=" "),r+=e);return r}},8293:(t,e,i)=>{"use strict";function r(t){var e=!1;return{promise:new Promise(function(i,r){t.then(function(t){return!e&&i(t)}).catch(function(t){return!e&&r(t)})}),cancel:function(){e=!0}}}i.d(e,{A:()=>r})},1846:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>s});var r=function(t,e,i){if(i||2==arguments.length)for(var r,n=0,s=e.length;n<s;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))},n=r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r([],["onCopy","onCut","onPaste"],!0),["onCompositionEnd","onCompositionStart","onCompositionUpdate"],!0),["onFocus","onBlur"],!0),["onInput","onInvalid","onReset","onSubmit"],!0),["onLoad","onError"],!0),["onKeyDown","onKeyPress","onKeyUp"],!0),["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],!0),["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],!0),["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],!0),["onSelect"],!0),["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],!0),["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],!0),["onScroll"],!0),["onWheel"],!0),["onAnimationStart","onAnimationEnd","onAnimationIteration"],!0),["onTransitionEnd"],!0),["onChange"],!0),["onToggle"],!0);function s(t,e){var i={};return n.forEach(function(r){var n=t[r];n&&(e?i[r]=function(t){return n(t,e(r))}:i[r]=n)}),i}},1446:(t,e,i)=>{"use strict";i.d(e,{A:()=>E});var r=i(5155),n=i(2115),s=i(1846),o=i(8293),a=i(3463),h=i(7254),l=i(1809),u=Object.prototype.hasOwnProperty;function c(t,e,i){for(i of t.keys())if(g(i,e))return i}function g(t,e){var i,r,n;if(t===e)return!0;if(t&&e&&(i=t.constructor)===e.constructor){if(i===Date)return t.getTime()===e.getTime();if(i===RegExp)return t.toString()===e.toString();if(i===Array){if((r=t.length)===e.length)for(;r--&&g(t[r],e[r]););return -1===r}if(i===Set){if(t.size!==e.size)return!1;for(r of t)if((n=r)&&"object"==typeof n&&!(n=c(e,n))||!e.has(n))return!1;return!0}if(i===Map){if(t.size!==e.size)return!1;for(r of t)if((n=r[0])&&"object"==typeof n&&!(n=c(e,n))||!g(r[1],e.get(n)))return!1;return!0}if(i===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(i===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return -1===r}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return -1===r}if(!i||"object"==typeof t){for(i in r=0,t)if(u.call(t,i)&&++r&&!u.call(e,i)||!(i in e)||!g(t[i],e[i]))return!1;return Object.keys(e).length===r}}return t!=t&&e!=e}var p=i(6275),d=i(2546),f=i(1193);class y{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return(0,h.A)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){(0,h.A)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{(0,h.A)(this.pdfDocument,"PDF document not loaded."),(0,h.A)(t,"Destination is not specified."),"string"==typeof t?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(t=>{(0,h.A)(Array.isArray(t),`"${t}" is not a valid destination array.`);let e=t[0];new Promise(t=>{(0,h.A)(this.pdfDocument,"PDF document not loaded."),e instanceof Object?this.pdfDocument.getPageIndex(e).then(e=>{t(e)}).catch(()=>{(0,h.A)(!1,`"${e}" is not a valid page reference.`)}):"number"==typeof e?t(e):(0,h.A)(!1,`"${e}" is not a valid destination reference.`)}).then(e=>{let i=e+1;(0,h.A)(this.pdfViewer,"PDF viewer is not initialized."),(0,h.A)(i>=1&&i<=this.pagesCount,`"${i}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:e,pageNumber:i})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){(0,h.A)(this.pdfViewer,"PDF viewer is not initialized."),(0,h.A)(t>=1&&t<=this.pagesCount,`"${t}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t-1,pageNumber:t})}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||"noopener noreferrer nofollow",t.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}let w={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var m=i(5237),x=i(1418),v=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)0>e.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]]);return i};let{Tm:b}=p,P=(t,e)=>{switch(e){case w.NEED_PASSWORD:t(prompt("Enter the password to open this PDF file."));break;case w.INCORRECT_PASSWORD:t(prompt("Invalid password. Please try again."))}};function S(t){return"object"==typeof t&&null!==t&&("data"in t||"range"in t||"url"in t)}let E=(0,n.forwardRef)(function(t,e){var{children:i,className:u,error:c="Failed to load PDF file.",externalLinkRel:w,externalLinkTarget:E,file:A,inputRef:T,imageResourcesPath:R,loading:C="Loading PDF",noData:L="No PDF file specified.",onItemClick:I,onLoadError:D,onLoadProgress:B,onLoadSuccess:M,onPassword:O=P,onSourceError:k,onSourceSuccess:U,options:_,renderMode:W,rotate:j}=t,H=v(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);let[F,G]=(0,x.A)(),{value:N,error:$}=F,[z,V]=(0,x.A)(),{value:q,error:Y}=z,Z=(0,n.useRef)(new y),J=(0,n.useRef)([]),X=(0,n.useRef)(void 0),K=(0,n.useRef)(void 0);A&&A!==X.current&&S(A)&&(l(!g(A,X.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),X.current=A),_&&_!==K.current&&(l(!g(_,K.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),K.current=_);let Q=(0,n.useRef)({scrollPageIntoView:t=>{let{dest:e,pageNumber:i,pageIndex:r=i-1}=t;if(I){I({dest:e,pageIndex:r,pageNumber:i});return}let n=J.current[r];if(n){n.scrollIntoView();return}l(!1,"An internal link leading to page ".concat(i," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});(0,n.useImperativeHandle)(e,()=>({linkService:Z,pages:J,viewer:Q}),[]),(0,n.useEffect)(function(){G({type:"RESET"})},[A,G]);let tt=(0,n.useCallback)(()=>{var t,e,i,r;return t=this,e=void 0,i=void 0,r=function*(){if(!A)return null;if("string"==typeof A)return(0,m.zL)(A)?{data:(0,m.jA)(A)}:((0,m.qC)(),{url:A});if(A instanceof b)return{range:A};if((0,m.mw)(A))return{data:A};if(m.Bd&&(0,m.qf)(A))return{data:yield(0,m.h1)(A)};if((0,h.A)("object"==typeof A,"Invalid parameter in file, need either Uint8Array, string or a parameter object"),(0,h.A)(S(A),"Invalid parameter object: need either .data, .range or .url"),"url"in A&&"string"==typeof A.url){if((0,m.zL)(A.url)){let{url:t}=A,e=v(A,["url"]);return Object.assign({data:(0,m.jA)(t)},e)}(0,m.qC)()}return A},new(i||(i=Promise))(function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(o,a)}h((r=r.apply(t,e||[])).next())})},[A]);(0,n.useEffect)(()=>{let t=(0,o.A)(tt());return t.promise.then(t=>{G({type:"RESOLVE",value:t})}).catch(t=>{G({type:"REJECT",error:t})}),()=>{(0,m.xL)(t)}},[tt,G]),(0,n.useEffect)(()=>{if(void 0!==N){if(!1===N){$&&(l(!1,$.toString()),k&&k($));return}U&&U()}},[N]),(0,n.useEffect)(function(){V({type:"RESET"})},[V,N]),(0,n.useEffect)(function(){if(!N)return;let t=_?Object.assign(Object.assign({},N),_):N,e=p.YE(t);B&&(e.onProgress=B),O&&(e.onPassword=O);let i=e.promise.then(t=>{V({type:"RESOLVE",value:t})}).catch(t=>{e.destroyed||V({type:"REJECT",error:t})});return()=>{i.finally(()=>e.destroy())}},[_,V,N]),(0,n.useEffect)(()=>{if(void 0!==q){if(!1===q){Y&&(l(!1,Y.toString()),D&&D(Y));return}q&&(M&&M(q),J.current=Array(q.numPages),Z.current.setDocument(q))}},[q]),(0,n.useEffect)(function(){Z.current.setViewer(Q.current),Z.current.setExternalLinkRel(w),Z.current.setExternalLinkTarget(E)},[w,E]);let te=(0,n.useCallback)((t,e)=>{J.current[t]=e},[]),ti=(0,n.useCallback)(t=>{delete J.current[t]},[]),tr=(0,n.useMemo)(()=>({imageResourcesPath:R,linkService:Z.current,onItemClick:I,pdf:q,registerPage:te,renderMode:W,rotate:j,unregisterPage:ti}),[R,I,q,te,W,j,ti]),tn=(0,n.useMemo)(()=>(0,s.Ay)(H,()=>q),[H,q]);return(0,r.jsx)("div",Object.assign({className:(0,a.A)("react-pdf__Document",u),ref:T,style:{"--scale-factor":"1"}},tn,{children:A?null==q?(0,r.jsx)(f.A,{type:"loading",children:"function"==typeof C?C():C}):!1===q?(0,r.jsx)(f.A,{type:"error",children:"function"==typeof c?c():c}):(0,r.jsx)(d.A.Provider,{value:tr,children:i}):(0,r.jsx)(f.A,{type:"no-data",children:"function"==typeof L?L():L})}))})},2546:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});let r=(0,i(2115).createContext)(null)},1193:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var r=i(5155);function n({children:t,type:e}){return(0,r.jsx)("div",{className:`react-pdf__message react-pdf__message--${e}`,children:t})}},7065:(t,e,i)=>{"use strict";i.d(e,{A:()=>I});var r=i(5155),n=i(2115),s=i(8293),o=i(1846),a=i(3463);function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.filter(Boolean);return i.length<=1?i[0]||null:function(t){i.forEach(function(e){"function"==typeof e?e(t):e&&(e.current=t)})}}var l=i(7254),u=i(1809);let c=(0,n.createContext)(null);var g=i(1193),p=i(6275);let d={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},f=/^H(\d+)$/;function y(t){return"children"in t}function w(t){return!!y(t)&&1===t.children.length&&0 in t.children&&"id"in t.children[0]}function m({className:t,node:e}){let i=(0,n.useMemo)(()=>e?Object.assign(Object.assign({},function(t){let e={};if(y(t)){let{role:i}=t,r=i.match(f);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(i in d){let t=d[i];t&&(e.role=t)}}return e}(e)),function t(e){let i={};if(y(e)){if(void 0!==e.alt&&(i["aria-label"]=e.alt),void 0!==e.lang&&(i.lang=e.lang),w(e)){let[r]=e.children;if(r){let e=t(r);return Object.assign(Object.assign({},i),e)}}}else"id"in e&&(i["aria-owns"]=e.id);return i}(e)):null,[e]),s=(0,n.useMemo)(()=>!y(e)||w(e)?null:e.children.map((t,e)=>(0,r.jsx)(m,{node:t},e)),[e]);return(0,r.jsx)("span",Object.assign({className:t},i,{children:s}))}function x(){return(0,n.useContext)(c)}var v=i(1418),b=i(5237);function P(){let t=x();(0,l.A)(t,"Unable to find Page context.");let{onGetStructTreeError:e,onGetStructTreeSuccess:i}=t,[o,a]=(0,v.A)(),{value:h,error:c}=o,{customTextRenderer:g,page:p}=t;return((0,n.useEffect)(function(){a({type:"RESET"})},[a,p]),(0,n.useEffect)(function(){if(g||!p)return;let t=(0,s.A)(p.getStructTree());return t.promise.then(t=>{a({type:"RESOLVE",value:t})}).catch(t=>{a({type:"REJECT",error:t})}),()=>(0,b.xL)(t)},[g,p,a]),(0,n.useEffect)(()=>{if(void 0!==h){if(!1===h){c&&(u(!1,c.toString()),e&&e(c));return}h&&i&&i(h)}},[h]),h)?(0,r.jsx)(m,{className:"react-pdf__Page__structTree structTree",node:h}):null}let S=p.ng;function E(t){let e=x();(0,l.A)(e,"Unable to find Page context.");let{_className:i,canvasBackground:s,devicePixelRatio:o=(0,b.mZ)(),onRenderError:a,onRenderSuccess:c,page:g,renderForms:p,renderTextLayer:d,rotate:f,scale:y}=Object.assign(Object.assign({},e),t),{canvasRef:w}=t;(0,l.A)(g,"Attempted to render page canvas, but no page was specified.");let m=(0,n.useRef)(null);function v(t){!(0,b.UT)(t)&&(u(!1,t.toString()),a&&a(t))}let E=(0,n.useMemo)(()=>g.getViewport({scale:y*o,rotation:f}),[o,g,f,y]),A=(0,n.useMemo)(()=>g.getViewport({scale:y,rotation:f}),[g,f,y]);(0,n.useEffect)(function(){if(!g)return;g.cleanup();let{current:t}=m;if(!t)return;t.width=E.width,t.height=E.height,t.style.width="".concat(Math.floor(A.width),"px"),t.style.height="".concat(Math.floor(A.height),"px"),t.style.visibility="hidden";let e={annotationMode:p?S.ENABLE_FORMS:S.ENABLE,canvasContext:t.getContext("2d",{alpha:!1}),viewport:E};s&&(e.background=s);let i=g.render(e);return i.promise.then(()=>{t.style.visibility="",g&&c&&c((0,b.vS)(g,y))}).catch(v),()=>(0,b.xL)(i)},[s,g,p,E,A]);let T=(0,n.useCallback)(()=>{let{current:t}=m;t&&(t.width=0,t.height=0)},[]);return(0,n.useEffect)(()=>T,[T]),(0,r.jsx)("canvas",{className:"".concat(i,"__canvas"),dir:"ltr",ref:h(w,m),style:{display:"block",userSelect:"none"},children:d?(0,r.jsx)(P,{}):null})}function A(){let t=x();(0,l.A)(t,"Unable to find Page context.");let{customTextRenderer:e,onGetTextError:i,onGetTextSuccess:o,onRenderTextLayerError:h,onRenderTextLayerSuccess:c,page:g,pageIndex:d,pageNumber:f,rotate:y,scale:w}=t;(0,l.A)(g,"Attempted to load page text content, but no page was specified.");let[m,P]=(0,v.A)(),{value:S,error:E}=m,A=(0,n.useRef)(null);u(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,n.useEffect)(function(){P({type:"RESET"})},[g,P]),(0,n.useEffect)(function(){if(!g)return;let t=(0,s.A)(g.getTextContent());return t.promise.then(t=>{P({type:"RESOLVE",value:t})}).catch(t=>{P({type:"REJECT",error:t})}),()=>(0,b.xL)(t)},[g,P]),(0,n.useEffect)(()=>{if(void 0!==S){if(!1===S){E&&(u(!1,E.toString()),i&&i(E));return}S&&o&&o(S)}},[S]);let T=(0,n.useCallback)(()=>{c&&c()},[c]),R=(0,n.useCallback)(t=>{u(!1,t.toString()),h&&h(t)},[h]),C=(0,n.useMemo)(()=>g.getViewport({scale:w,rotation:y}),[g,y,w]);return(0,n.useLayoutEffect)(function(){if(!g||!S)return;let{current:t}=A;if(!t)return;t.innerHTML="";let i=g.streamTextContent({includeMarkedContent:!0}),r=new p.D6({container:t,textContentSource:i,viewport:C});return r.render().then(()=>{let i=document.createElement("div");i.className="endOfContent",t.append(i);let r=t.querySelectorAll('[role="presentation"]');if(e){let t=0;S.items.forEach((i,n)=>{if(!("str"in i))return;let s=r[t];if(!s)return;let o=e(Object.assign({pageIndex:d,pageNumber:f,itemIndex:n},i));s.innerHTML=o,t+=i.str&&i.hasEOL?2:1})}T()}).catch(R),()=>(0,b.xL)(r)},[e,R,T,g,d,f,S,C]),(0,r.jsx)("div",{className:(0,a.A)("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){let t=A.current;t&&t.classList.remove("selecting")},onMouseDown:function(){let t=A.current;t&&t.classList.add("selecting")},ref:A})}var T=i(2546);function R(){return(0,n.useContext)(T.A)}function C(){let t=R(),e=x();(0,l.A)(e,"Unable to find Page context.");let{imageResourcesPath:i,linkService:o,onGetAnnotationsError:h,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:g,onRenderAnnotationLayerSuccess:d,page:f,pdf:y,renderForms:w,rotate:m,scale:P=1}=Object.assign(Object.assign({},t),e);(0,l.A)(y,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),(0,l.A)(f,"Attempted to load page annotations, but no page was specified."),(0,l.A)(o,"Attempted to load page annotations, but no linkService was specified.");let[S,E]=(0,v.A)(),{value:A,error:T}=S,C=(0,n.useRef)(null);u(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,n.useEffect)(function(){E({type:"RESET"})},[E,f]),(0,n.useEffect)(function(){if(!f)return;let t=(0,s.A)(f.getAnnotations());return t.promise.then(t=>{E({type:"RESOLVE",value:t})}).catch(t=>{E({type:"REJECT",error:t})}),()=>{(0,b.xL)(t)}},[E,f]),(0,n.useEffect)(()=>{if(void 0!==A){if(!1===A){T&&(u(!1,T.toString()),h&&h(T));return}A&&c&&c(A)}},[A]);let L=(0,n.useMemo)(()=>f.getViewport({scale:P,rotation:m}),[f,m,P]);return(0,n.useEffect)(function(){if(!y||!f||!o||!A)return;let{current:t}=C;if(!t)return;let e=L.clone({dontFlip:!0}),r={annotations:A,annotationStorage:y.annotationStorage,div:t,imageResourcesPath:i,linkService:o,page:f,renderForms:w,viewport:e};t.innerHTML="";try{new p.dU({accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:t,l10n:null,page:f,structTreeLayer:null,viewport:e}).render(r),d&&d()}catch(t){u(!1,"".concat(t)),g&&g(t)}return()=>{}},[A,i,o,f,y,w,L]),(0,r.jsx)("div",{className:(0,a.A)("react-pdf__Page__annotations","annotationLayer"),ref:C})}var L=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)0>e.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]]);return i};function I(t){let e=Object.assign(Object.assign({},R()),t),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:p=!0,canvasBackground:d,canvasRef:f,children:y,className:w,customRenderer:m,customTextRenderer:x,devicePixelRatio:P,error:S="Failed to load the page.",height:T,inputRef:I,loading:D="Loading page",noData:B="No page specified.",onGetAnnotationsError:M,onGetAnnotationsSuccess:O,onGetStructTreeError:k,onGetStructTreeSuccess:U,onGetTextError:_,onGetTextSuccess:W,onLoadError:j,onLoadSuccess:H,onRenderAnnotationLayerError:F,onRenderAnnotationLayerSuccess:G,onRenderError:N,onRenderSuccess:$,onRenderTextLayerError:z,onRenderTextLayerSuccess:V,pageIndex:q,pageNumber:Y,pdf:Z,registerPage:J,renderAnnotationLayer:X=!0,renderForms:K=!1,renderMode:Q="canvas",renderTextLayer:tt=!0,rotate:te,scale:ti=1,unregisterPage:tr,width:tn}=e,ts=L(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[to,ta]=(0,v.A)(),{value:th,error:tl}=to,tu=(0,n.useRef)(null);(0,l.A)(Z,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");let tc=(0,b.ci)(Y)?Y-1:null!=q?q:null,tg=null!=Y?Y:(0,b.ci)(q)?q+1:null,tp=null!=te?te:th?th.rotate:null,td=(0,n.useMemo)(()=>{if(!th)return null;let t=1,e=null!=ti?ti:1;if(tn||T){let e=th.getViewport({scale:1,rotation:tp});tn?t=tn/e.width:T&&(t=T/e.height)}return e*t},[T,th,tp,ti,tn]);(0,n.useEffect)(function(){return()=>{(0,b.ci)(tc)&&p&&tr&&tr(tc)}},[p,Z,tc,tr]),(0,n.useEffect)(function(){ta({type:"RESET"})},[ta,Z,tc]),(0,n.useEffect)(function(){if(!Z||!tg)return;let t=(0,s.A)(Z.getPage(tg));return t.promise.then(t=>{ta({type:"RESOLVE",value:t})}).catch(t=>{ta({type:"REJECT",error:t})}),()=>(0,b.xL)(t)},[ta,Z,tg]),(0,n.useEffect)(()=>{if(void 0!==th){if(!1===th){tl&&(u(!1,tl.toString()),j&&j(tl));return}!function(){if(H){if(!th||!td)return;H((0,b.vS)(th,td))}if(p&&J){if(!(0,b.ci)(tc)||!tu.current)return;J(tc,tu.current)}}()}},[th,td]);let tf=(0,n.useMemo)(()=>th&&(0,b.ci)(tc)&&tg&&(0,b.ci)(tp)&&(0,b.ci)(td)?{_className:i,canvasBackground:d,customTextRenderer:x,devicePixelRatio:P,onGetAnnotationsError:M,onGetAnnotationsSuccess:O,onGetStructTreeError:k,onGetStructTreeSuccess:U,onGetTextError:_,onGetTextSuccess:W,onRenderAnnotationLayerError:F,onRenderAnnotationLayerSuccess:G,onRenderError:N,onRenderSuccess:$,onRenderTextLayerError:z,onRenderTextLayerSuccess:V,page:th,pageIndex:tc,pageNumber:tg,renderForms:K,renderTextLayer:tt,rotate:tp,scale:td}:null,[i,d,x,P,M,O,k,U,_,W,F,G,N,$,z,V,th,tc,tg,K,tt,tp,td]),ty=(0,n.useMemo)(()=>(0,o.Ay)(ts,()=>th?td?(0,b.vS)(th,td):void 0:th),[ts,th,td]),tw="".concat(tc,"@").concat(td,"/").concat(tp);return(0,r.jsx)("div",Object.assign({className:(0,a.A)(i,w),"data-page-number":tg,ref:h(I,tu),style:{"--scale-factor":"".concat(td),backgroundColor:d||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},ty,{children:tg?null===Z||null==th?(0,r.jsx)(g.A,{type:"loading",children:"function"==typeof D?D():D}):!1===Z||!1===th?(0,r.jsx)(g.A,{type:"error",children:"function"==typeof S?S():S}):(0,r.jsxs)(c.Provider,{value:tf,children:[function(){switch(Q){case"custom":return(0,l.A)(m,'renderMode was set to "custom", but no customRenderer was passed.'),(0,r.jsx)(m,{},"".concat(tw,"_custom"));case"none":return null;default:return(0,r.jsx)(E,{canvasRef:f},"".concat(tw,"_canvas"))}}(),tt?(0,r.jsx)(A,{},"".concat(tw,"_text")):null,X?(0,r.jsx)(C,{},"".concat(tw,"_annotations")):null,y]}):(0,r.jsx)(g.A,{type:"no-data",children:"function"==typeof B?B():B})}))}},1418:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var r=i(2115);function n(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function s(){return(0,r.useReducer)(n,{value:void 0,error:void 0})}},5237:(t,e,i)=>{"use strict";i.d(e,{Bd:()=>s,UT:()=>y,ci:()=>a,h1:()=>w,jA:()=>c,mZ:()=>g,mw:()=>h,qC:()=>p,qf:()=>l,vS:()=>f,xL:()=>d,zL:()=>u});var r=i(7254),n=i(1809);let s="undefined"!=typeof window,o=s&&"file:"===window.location.protocol;function a(t){return null!=t}function h(t){return t instanceof ArrayBuffer}function l(t){return(0,r.A)(s,"isBlob can only be used in a browser environment"),t instanceof Blob}function u(t){return"string"==typeof t&&/^data:/.test(t)}function c(t){(0,r.A)(u(t),"Invalid data URI.");let[e="",i=""]=t.split(",");return -1!==e.split(";").indexOf("base64")?atob(i):unescape(i)}function g(){return s&&window.devicePixelRatio||1}function p(){n(!o,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.")}function d(t){(null==t?void 0:t.cancel)&&t.cancel()}function f(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}function y(t){return"RenderingCancelledException"===t.name}function w(t){return new Promise((e,i)=>{let r=new FileReader;r.onload=()=>{if(!r.result)return i(Error("Error while reading a file."));e(r.result)},r.onerror=t=>{if(!t.target)return i(Error("Error while reading a file."));let{error:e}=t.target;if(!e)return i(Error("Error while reading a file."));switch(e.code){case e.NOT_FOUND_ERR:return i(Error("Error while reading a file: File not found."));case e.SECURITY_ERR:return i(Error("Error while reading a file: Security error."));case e.ABORT_ERR:return i(Error("Error while reading a file: Aborted."));default:return i(Error("Error while reading a file."))}},r.readAsArrayBuffer(t)})}},7254:(t,e,i)=>{"use strict";function r(t,e){if(!t)throw Error("Invariant failed")}i.d(e,{A:()=>r})}}]);